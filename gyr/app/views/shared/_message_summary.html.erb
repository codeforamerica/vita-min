<% # This template is rendered as HTML in the tooltip. Rails auto-escaping works properly in this context.
   # Since the template is rendered into a HTML attribute, the HTML attribute must be created by Rails through
   # e.g. `tag.span(title: render("message_summary", message_summary: foo))` so that Rails knows it's an attribute.
   #
   # The tooltip renders the template with CSS rules that show all whitespace, so a newline character is enough;
   # no <br> etc. is needed.
%>"<%= message_summary[:body].truncate(80, separator: /\s/) %>"

<%= message_summary[:author] %>
<%= long_formatted_datetime(message_summary[:date]) %>
