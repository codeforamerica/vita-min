<% is_dropoff = is_dropoff || false %>
<div id="primary-info">
  <h3 class="h2"><%= t("hub.clients.fields.primary_contact_info") %>:</h3>
  <div class="hub-form__row fill">
    <%= f.cfa_input_field(:primary_first_name, t("hub.clients.fields.legal_first_name"), classes: ["form-width--long"]) %>
    <%= f.cfa_input_field(:primary_last_name, t("hub.clients.fields.legal_last_name"), classes: ["form-width--long"]) %>
  </div>
  <%= f.cfa_input_field(:preferred_name, t("hub.clients.fields.preferred_name"), classes: ["form-width--long"]) %>
  <%= f.cfa_select(:timezone, t("general.timezone"), timezone_select_options, selected: current_user.timezone) %>
  <% unless is_dropoff %>
    <%= f.cfa_input_field(:interview_timing_preference, t("hub.clients.show.interview_timing_preference")) %>
  <% end %>
  <%= f.cfa_select(
          :preferred_interview_language,
          t("hub.clients.fields.preferred_interview_language"),
          I18n.backend.translations[I18n.locale][:general][:language_options].invert,
          include_blank: true,
          selected: @form.preferred_interview_language
      ) %>
  <%= error_message(@form, :communication_preference) %>
  <div class="hub-form__row fill align-center">
    <%= f.cfa_input_field(:email_address, t("general.email"), classes: ["form-width--long"]) %>
    <%= f.cfa_checkbox(:email_notification_opt_in, t("general.opt_in_email"), options: { checked_value: "yes", unchecked_value: "no" }) %>
  </div>
  <div class="hub-form__row fill align-center">
    <%= f.cfa_input_field(:sms_phone_number, t("general.phone_for_texting"), classes: ["form-width--long"]) %>
    <%= f.cfa_checkbox(:sms_notification_opt_in, t("general.opt_in_sms"), options: { checked_value: "yes", unchecked_value: "no" }) %>
  </div>
  <%= f.cfa_input_field(:phone_number, t("general.phone_number"), classes: ["form-width--long"]) %>
  <%= f.cfa_input_field(
          :primary_last_four_ssn,
          t("general.last_four_ssn"),
          prefix: "XXX-XX-",
          type: :tel,
          classes: ["form-width--name field--last-four-ssn"],
          options: { maxlength: 4 }
      ) %>

  <h3 class="h2"><%= t("hub.clients.fields.filing_information") %>:</h3>
  <%= f.cfa_checkbox(:filing_joint, t("general.filing_joint"), options: { checked_value: "yes", unchecked_value: "no" }) %>
  <%= f.cfa_checkbox(:married, t("general.married"), options: { checked_value: "yes", unchecked_value: "no" }) %>
  <div class="hub-form__row">
    <%= f.cfa_checkbox(:separated, t("general.separated"), options: { checked_value: "yes", unchecked_value: "no" }) %>
    <%= f.cfa_input_field(:separated_year, "#{t("general.separated")} #{t("general.year")}", classes: ["form-width--short"]) %>
  </div>
  <div class="hub-form__row">
    <%= f.cfa_checkbox(:widowed, t("general.widowed"), options: { checked_value: "yes", unchecked_value: "no" }) %>
    <%= f.cfa_input_field(:widowed_year, "#{t("general.widowed")} #{t("general.year")}", classes: ["form-width--short"]) %>
  </div>
  <div class="hub-form__row">
    <%= f.cfa_checkbox(:divorced, t("general.divorced"), options: { checked_value: "yes", unchecked_value: "no" }) %>
    <%= f.cfa_input_field(:divorced_year, "#{t("general.divorced")} #{t("general.year")}", classes: ["form-width--short"]) %>
  </div>

  <%= f.cfa_checkbox(:lived_with_spouse, t("general.lived_with_spouse"), options: { checked_value: "yes", unchecked_value: "no" }) %>
  <%= f.cfa_select(:state_of_residence, t("hub.clients.fields.state_of_residence"), States.name_value_pairs, include_blank: true) %>

  <h3 class="h2"><%= t("hub.clients.fields.mailing_address") %>:</h3>
  <%= f.cfa_input_field(:street_address, t("general.street_address"), classes: ["form-width--long"]) %>
  <div class="hub-form__row">
    <%= f.cfa_input_field(:city, t("general.city"), classes: ["form-width--long"]) %>
    <%= f.cfa_select(:state, t("general.state"), States.name_value_pairs, include_blank: true) %>
    <%= f.cfa_input_field(:zip_code, t("general.zip_code"), classes: ["form-width--zip"]) %>
  </div>
</div>
