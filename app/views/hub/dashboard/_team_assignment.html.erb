<% p = presenter.team_assignment_presenter %>
<% users = p.team_assignment_users %>
<div class="card dashboard-table team-assignments">
  <h2><%= t("hub.dashboard.show.team_assignment.title") %></h2>

  <table>
    <thead>
    <tr>
      <th><%= t("hub.dashboard.show.team_assignment.name") %></th>
      <th><%= t("hub.dashboard.show.team_assignment.role") %></th>
      <th><%= t("hub.dashboard.show.team_assignment.assigned_returns") %></th>
    </tr>
    </thead>
    <tbody>
    <% if users&.present? %>
      <% users.each do |user| %>
        <tr>
          <td>
            <%= user.name %>
          </td>
          <td>
            <%= user.role_display_name %>
          </td>
          <td>
            <%= user.assigned_tax_returns.count %>
          </td>
        </tr>
      <% end %>
    <% end %>
    </tbody>
  </table>

  <% if users.present? %>
    <div class="paging">
      <div class="user-count">
        <% start_user = ((p.page.to_i - 1) * 5) + 1 %>
        <% end_user = [start_user + 4, users.count].min %>
        <%= t("hub.dashboard.show.team_assignment.pager", start_range: start_user, end_range: end_user, total: users.count) %>
      </div>
      <div><%= will_paginate users,
                             previous_label: "<i class='icon icon-keyboard_arrow_left'></i><span class='hide-on-mobile'>Previous 5</span>",
                             next_label: "<span class='hide-on-mobile'>Next 5</span><i class='icon icon-keyboard_arrow_right'></i>",
                             inner_window: 0,
                             outer_window: 0
      %></div>

    </div>
  <% else %>
    <p><%= t("hub.dashboard.show.team_assignment.no_team_assignments") %></p>
  <% end %>
</div>