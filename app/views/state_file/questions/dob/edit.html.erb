<% content_for :page_title, "Dependents' date of birth and months in home" %>

<% content_for :card do %>
  <p><%= t('.title1') %></p>
  <% if @form.ask_primary_dob? %>
    <p><%= t('.title2_you_and_household') %></p>
  <% else %>
    <p><%= t('.title2_family') %></p>
  <% end %>

  <%= form_with model: @form, url: { action: :update }, method: :put, local: true, builder: VitaMinFormBuilder, class: 'form-card' do |f| %>
    <%= f.fields_for :dependents do |ff| %>
      <% if f.object.ask_primary_dob? %>
        <div class="highlight-box highlight-box--blue spacing-below-15">
          <div class="date-select spacing-below-5">
            <%= f.cfa_date_select(:primary_birth_date,
                                  t('.your_dob'),
                                  options: {
                                    start_year: Time.now.year,
                                    end_year: Time.now.year - 100,
                                  }) %>
          </div>
        </div>
      <% end %>
      <% if f.object.ask_spouse_dob? %>
        <div class="highlight-box highlight-box--blue spacing-below-15">
          <div class="date-select spacing-below-5">
            <%= f.cfa_date_select(:spouse_birth_date,
                                  t('.dob_label', name: f.object.intake.spouse_first_name.capitalize),
                                  options: {
                                    start_year: Time.now.year,
                                    end_year: Time.now.year - 100,
                                  }) %>
          </div>
        </div>
      <% end %>
      <div class="highlight-box highlight-box--blue spacing-below-15">
        <div class="date-select spacing-below-5">
          <%= ff.cfa_date_select(:dob,
                                 t('.dob_label', name: ff&.object&.first_name&.capitalize),
                                 options: {
                                   start_year: Time.now.year,
                                   end_year: Time.now.year - 100,
                                 }) %>
        </div>
        <% if f.object.ask_months_in_home? %>
          <%= ff.cfa_select(
                :months_in_home,
                t('.dependent_months_lived_label', year: Rails.configuration.state_file_filing_year),
                (0..12).map { |i| [i.to_s, i] }.reverse
              ) %>
        <% end %>
      </div>
    <% end %>
    <button class="button button--primary" type="submit">
      <%= t("general.continue") %>
    </button>
  <% end %>

<% end %>