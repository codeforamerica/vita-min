<% content_for :page_title, t("state_file.questions.shared.review_header.title") %>
<% content_for :card do %>
  <%= render "state_file/questions/shared/review_header", us_state: 'az' %>

  <div id="prior-last-names" class="blue-group">
    <div class="spacing-below-5">
      <p class="text--bold spacing-below-5"><%=t(".last_names") %></p>
      <p><%=current_intake.prior_last_names || t("general.none") %></p>
      <%= link_to t("general.edit"), StateFile::Questions::AzPriorLastNamesController.to_path_helper(us_state: "az", return_to_review: "y"), class: "button--small" %>
    </div>
  </div>

  <div id="state-credits" class="blue-group">
    <div class="spacing-below-5">
      <p class="text--bold spacing-below-5"><%=t(".tribal_member") %></p>
      <p><%=current_intake.tribal_member_yes? ? t("general.affirmative") : t("general.negative") %></p>
      <% if current_intake.tribal_member_yes? %>
        <p class="text--bold spacing-below-5"><%=t(".tribal_wages") %></p>
        <p><%=number_to_currency(current_intake.tribal_wages) %></p>
      <% end %>
      <p class="text--bold spacing-below-5"><%=t(".armed_forces_member") %></p>
      <p><%=current_intake.armed_forces_member_yes? ? t("general.affirmative") : t("general.negative") %></p>
      <% if current_intake.armed_forces_member_yes? %>
        <p class="text--bold spacing-below-5"><%=t(".armed_forces_wages") %></p>
        <p><%=number_to_currency(current_intake.armed_forces_wages) %></p>
      <% end %>
      <%= link_to t("general.edit"), StateFile::Questions::AzStateCreditsController.to_path_helper(us_state: "az", return_to_review: "y"), class: "button--small" %>
    </div>
  </div>

  <div id="charitable-contributions" class="blue-group">
    <div class="spacing-below-5">
      <p class="text--bold spacing-below-5"><%=t(".charitable_contributions") %></p>
      <p><%=current_intake.charitable_contributions_yes? ? t("general.affirmative") : t("general.negative") %></p>
      <% if current_intake.charitable_contributions_yes? %>
        <p class="text--bold spacing-below-5"><%=t(".charitable_cash") %></p>
        <p><%=number_to_currency(current_intake.charitable_cash) || t("general.none") %></p>
        <p class="text--bold spacing-below-5"><%=t(".charitable_noncash") %></p>
        <p><%=number_to_currency(current_intake.charitable_noncash) || t("general.none") %></p>
      <% end %>
      <%= link_to t("general.edit"), StateFile::Questions::AzCharitableContributionsController.to_path_helper(us_state: "az", return_to_review: "y"), class: "button--small" %>
    </div>
  </div>

  <% if current_intake.ask_whether_incarcerated? %>
    <div id="incarcerated" class="blue-group">
      <div class="spacing-below-5">
        <p class="text--bold spacing-below-5"><%=t(".excise_credit") %></p>
        <p><%=current_intake.was_incarcerated_yes? ? t("general.affirmative") : t("general.negative") %></p>
        <%= link_to t("general.edit"), StateFile::Questions::AzExciseCreditController.to_path_helper(us_state: "az", return_to_review: "y"), class: "button--small" %>
      </div>
    </div>
  <% end %>

  <div id="details" class="reveal">
    <p><a href="#" class="reveal__link"><%= t('.see_detailed_return') %></a></p>
    <div class="reveal__content">
      <div class="spacing-below-25 with-top-separator">
        <p class="text--bold spacing-below-5"><%=t(".fed_agi") %></p>
        <p><%#= number_to_currency(current_intake.direct_file_data.fed_agi) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".total_arizona_subtractions") %></p>
        <%# Should be the sum of lines 20-23, but only line 21 is in scope %>
        <p><%# = number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_21)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".total_exemptions") %></p>
        <p><%#= number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_32)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".az_agi") %></p>
        <p><%#= number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_33)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".standard_deduction") %></p>
        <p><%#= number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_34)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".incr_deduction_chrit_contributions") %></p>
        <%# The PDF has a hard-coded $ and 000 around the number. We replicate that here by multiplying by 1,000. %>
        <p><%#= number_to_currency(
                 (current_intake.calculator.line_or_zero(:IT201_LINE_36) * 1_000).round
               ) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".az_taxable_income") %></p>
        <p><%#= number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_37)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25 with-top-separator">
        <p class="text--bold spacing-below-5"><%=t(".az_tax") %></p>
        <p><%#= number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_39)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".dependent_tax_credit") %></p>
        <p><%#= number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_59)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".family_income_tax_credit") %></p>
        <p><%# = number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_76)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25 with-top-separator">
        <p class="text--bold spacing-below-5"><%=t(".az_tax_withheld") %></p>
        <p><%# = number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_76)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".increased_excise_tax_credit") %></p>
        <p><%# = number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_76)) %></p>
        <p><%= 'TEst' %></p>
      </div>

      <div class="spacing-below-25">
        <p class="text--bold spacing-below-5"><%=t(".total_payments") %></p>
        <p><%# = number_to_currency(current_intake.calculator.line_or_zero(:IT201_LINE_76)) %></p>
        <p><%= 'TEst' %></p>
      </div>
    </div>
  </div>

  <%= render "state_file/questions/shared/review_footer" %>
<% end %>
