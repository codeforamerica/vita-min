<% title = t(".title", owed_amount: taxes_owed) %>

<% content_for :page_title, title %>
<% content_for :card do %>
  <h1 class="h2">
    <%= title %>
  </h1>

  <%= form_with model: @form, url: { action: :update }, local: true, builder: VitaMinFormBuilder, html: {class: 'form-card form-card--long'} do |f| %>
    <div class="question-with-follow-up">
      <div class="question-with-follow-up__question">
        <%= f.cfa_radio_set(
          :deposit_type,
          collection: [
            { value: :mail_or_online, label: t(".pay_mail_online") },
            { value: :pay_from_bank, label: t(".pay_bank"), input_html: { "data-follow-up": "#pay-from-bank" } },
          ]
        ) %>
      </div>
      <div class="question-with-follow-up__follow-up" id="pay-from-bank">
        <div class="question-with-follow-up">
          <div class="question-with-follow-up__question">
            <%= form_with model: @form, url: current_path, local: true, method: "put", builder: VitaMinFormBuilder, html: { class: "form-card form-card--long", autocomplete: "off" } do |f| %>
              <div class="form-card__content">
                <%= f.cfa_input_field(:bank_name, t("views.questions.bank_details.bank_name"), classes: ["form-width--long"]) %>
                <%= f.cfa_radio_set(
                      :account_type,
                      label_text: t("views.questions.bank_details.account_type.label"),
                      collection: [
                        { value: :checking, label: t("views.questions.bank_details.account_type.checking") },
                        { value: :savings, label: t("views.questions.bank_details.account_type.savings") },
                      ]
                    )
                %>
                <%= f.cfa_input_field(:bank_routing_number, t(".routing_number"), classes: ["form-width--long"]) %>
                <%= f.cfa_input_field(:routing_number_confirmation, t(".confirm_routing_number"), classes: ["form-width--long"]) %>
                <%= f.cfa_input_field(:bank_account_number, t(".account_number"), classes: ["form-width--long"]) %>
                <%= f.cfa_input_field(:account_number_confirmation, t(".confirm_account_number"), classes: ["form-width--long"]) %>
              </div>

              <%= f.continue %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
